<html>
	<head>
		<meta charset="utf-8">
		<title>aaaaa</title>
	</head>
	<body>
		<p id="text"></p>
		<button onclick="start();">start</button>
		<button onclick="stop();">stop</button>
	<script type="text/javascript">
var ctx=null;
var gainnode;
pp=document.getElementById("text");

function det(){
tt="device=";
navigator.mediaDevices.enumerateDevices().then(
        function(devi){
		devi.forEach(
		function (d){
		  if(d.kind=="audipoutput"){tt=tt+"out"+d.deviceId};
		  if(d.kind=="audioinput"){tt=tt+"in"+d.deviceId};
		}
	        )
	}
)
pp.innerHTML=tt;
}
function start(){
	pp.innerHTML="steam!!";
	if(ctx){
		pp.innerHTML="START";
		gainnode.gain.value=1.0;
		return;
	};
	ctx=new AudioContext();
	navigator.getUserMedia=navigator.getUserMedia || navigator.webkitGetUserMedia;
	navigator.getUserMedia({audio:true,video:false},play,(er)=>{pp.append(er);});
}
function play(stream){
	source=ctx.createMediaStreamSource(stream);
	gainnode=new GainNode(ctx);
	source.connect(gainnode);
	gainnode.connect(ctx.destination);
}
function stop(){
	pp.innerHTML="STOP";
	gainnode.gain.value=0.0;
}
</script>
	</body>
	
</html>
